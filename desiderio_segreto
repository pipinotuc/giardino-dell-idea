<div class="desiderio">
  <h2>ðŸŒ  Desiderio Segreto</h2>
  <p id="desiderio-testo"></p>
  <textarea id="desiderio-input" rows="2" placeholder="Scrivi qui il tuo desiderio..."></textarea>
  <button onclick="salvaDesiderio()" style="margin-top:10px">ðŸ’« Salva Desiderio</button>
</div>

<style>
  .desiderio {
    width: 90%;
    max-width: 600px;
    background: #fce4ec;
    border: 2px solid #f06292;
    border-radius: 10px;
    padding: 15px;
    margin-top: 30px;
    text-align: center;
  }
  .desiderio textarea {
    width: 100%;
    padding: 8px;
    font-family: inherit;
    font-size: 1em;
    border-radius: 6px;
    border: 1px solid #ccc;
    margin-top: 10px;
  }
</style>

<script>
  function checkDesiderio() {
    const oggi = new Date().toLocaleDateString('it-IT');
    const ultimo = localStorage.getItem('ultimoDesiderio') || '';
    const salvato = localStorage.getItem('desiderio_' + oggi);

    const testo = document.getElementById('desiderio-testo');
    const box = document.getElementById('desiderio-input');

    if (salvato) {
      testo.textContent = `âœ¨ Il tuo desiderio di oggi (${oggi}):`;
      box.value = salvato;
      box.disabled = true;
    } else {
      testo.textContent = `ðŸ§š Mimi ti chiede: hai un desiderio oggi, ${oggi}?`;
      box.disabled = false;
    }
  }

  function salvaDesiderio() {
    const oggi = new Date().toLocaleDateString('it-IT');
    const valore = document.getElementById('desiderio-input').value.trim();
    if (valore) {
      localStorage.setItem('desiderio_' + oggi, valore);
      localStorage.setItem('ultimoDesiderio', oggi);
      checkDesiderio();
    }
  }

  checkDesiderio();
</script>
